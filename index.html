<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wasteland Editor - Fallout Shelter Save Editor</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Wasteland Editor</h1>
            <p class="subtitle">Fallout Shelter Save File Editor</p>
            
            <div class="nav-links">
                <a href="index.html" class="nav-link active">Editor</a>
                <a href="pages/inspector.html" class="nav-link">File Inspector</a>
            </div>
        </header>

        <main>
            <section class="control-panel">
                <div class="file-upload-section">
                    <label for="fileInput" class="upload-label">
                        <span class="upload-icon">üìÅ</span>
                        <span>Upload Save File</span>
                    </label>
                    <input type="file" id="fileInput" accept=".json,.dat,.sav" hidden>
                    <div id="fileInfo" class="file-info"></div>
                </div>

                <div class="action-buttons">
                    <button id="downloadBtn" class="btn btn-primary" disabled>
                        üíæ Download Save
                    </button>
                    <button id="formatBtn" class="btn btn-secondary" disabled>
                        ‚ú® Format JSON
                    </button>
                    <button id="historyBtn" class="btn btn-secondary" disabled>
                        üìú Change History
                    </button>
                    <button id="clearBtn" class="btn btn-secondary" disabled>
                        üóëÔ∏è Clear
                    </button>
                </div>
            </section>

            <section class="editor-section">
                <div class="editor-tabs">
                    <button class="tab-btn active" data-tab="vault">Vault</button>
                    <button class="tab-btn" data-tab="dwellers">Dwellers</button>
                    <button class="tab-btn" data-tab="rooms">Rooms</button>
                    <button class="tab-btn" data-tab="wasteland">Wasteland</button>
                    <button class="tab-btn" data-tab="inventory">Inventory</button>
                    <button class="tab-btn" data-tab="seasonpass">Season Pass</button>
                    <button class="tab-btn" data-tab="others">Others</button>
                    <button class="tab-btn" data-tab="raw">Raw JSON</button>
                </div>

                <!-- VAULT TAB -->
                <div id="vault" class="tab-content active">
                    <div class="field-legend">
                        <span class="legend-item">
                            <span style="color: #228B22; font-weight: bold;">‚úì</span> Original value
                        </span>
                        <span class="legend-item">
                            <span style="color: #FF8C00; font-weight: bold;">‚óè</span> Modified
                        </span>
                    </div>
                    <div class="vault-panel">
                        <div class="panel-section">
                            <h3>Vault Settings</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>
                                        Vault Name:
                                        <span class="info-icon" title="The name of your vault">‚ìò</span>
                                    </label>
                                    <input type="text" id="vaultName" placeholder="Enter vault name">
                                </div>
                                <div class="form-group">
                                    <label>
                                        Vault Number:
                                        <span class="info-icon" title="Your vault number (0-999)">‚ìò</span>
                                    </label>
                                    <input type="number" id="vaultNumber" min="0" max="999" placeholder="0">
                                </div>
                            </div>
                        </div>

                        <div class="panel-section">
                            <h3>Resources</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>
                                        Caps:
                                        <span class="info-icon" title="Vault currency for buying and upgrading">‚ìò</span>
                                    </label>
                                    <input type="number" id="caps" min="0" placeholder="0">
                                </div>
                                <div class="form-group">
                                    <label>
                                        Food:
                                        <span class="info-icon" title="Food resources for dweller survival">‚ìò</span>
                                    </label>
                                    <input type="number" id="food" min="0" placeholder="0">
                                </div>
                                <div class="form-group">
                                    <label>
                                        Water:
                                        <span class="info-icon" title="Water resources for dweller survival">‚ìò</span>
                                    </label>
                                    <input type="number" id="water" min="0" placeholder="0">
                                </div>
                                <div class="form-group">
                                    <label>
                                        Power:
                                        <span class="info-icon" title="Energy to keep vault running">‚ìò</span>
                                    </label>
                                    <input type="number" id="power" min="0" placeholder="0">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>
                                        RadAway:
                                        <span class="info-icon" title="Medicine to remove radiation">‚ìò</span>
                                    </label>
                                    <input type="number" id="radaway" min="0" placeholder="0">
                                </div>
                                <div class="form-group">
                                    <label>
                                        Stimpacks:
                                        <span class="info-icon" title="Medicine to heal dwellers">‚ìò</span>
                                    </label>
                                    <input type="number" id="stimpacks" min="0" placeholder="0">
                                </div>
                                <div class="form-group">
                                    <label>
                                        Nuka Cola:
                                        <span class="info-icon" title="Regular Nuka Cola for various uses">‚ìò</span>
                                    </label>
                                    <input type="number" id="nukacola" min="0" placeholder="0">
                                </div>
                                <div class="form-group">
                                    <label>
                                        Nuka Cola Quantum:
                                        <span class="info-icon" title="Premium currency for instant actions">‚ìò</span>
                                    </label>
                                    <input type="number" id="nukaquantum" min="0" placeholder="0">
                                </div>
                            </div>
                        </div>

                        <div class="panel-section">
                            <h3>Lunchboxes & Special Items</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>
                                        Lunch Boxes:
                                        <span class="info-icon" title="Lunchboxes containing random rewards">‚ìò</span>
                                    </label>
                                    <input type="number" id="lunchboxCount" min="0" placeholder="0">
                                </div>
                                <div class="form-group">
                                    <label>
                                        Mr. Handies:
                                        <span class="info-icon" title="Robotic helpers for your vault">‚ìò</span>
                                    </label>
                                    <input type="number" id="handyCount" min="0" placeholder="0">
                                </div>
                                <div class="form-group">
                                    <label>
                                        Pet Carriers:
                                        <span class="info-icon" title="Carriers containing random pets">‚ìò</span>
                                    </label>
                                    <input type="number" id="petCarrierCount" min="0" placeholder="0">
                                </div>
                                <div class="form-group">
                                    <label>
                                        Starter Packs:
                                        <span class="info-icon" title="Special starter pack items">‚ìò</span>
                                    </label>
                                    <input type="number" id="starterPackCount" min="0" placeholder="0">
                                </div>
                            </div>
                        </div>

                        <div class="panel-section">
                            <h3>Bulk Actions</h3>
                            <div class="button-grid">
                                <button class="btn btn-secondary" id="unlockRoomsBtn">Unlock All Rooms</button>
                                <button class="btn btn-secondary" id="maxAllStatsBtn">Max All Dweller Stats</button>
                                <button class="btn btn-secondary" id="maxHappinessBtn">Max All Happiness</button>
                                <button class="btn btn-secondary" id="healAllBtn">Heal All Dwellers</button>
                                <button class="btn btn-secondary" id="clearEmergenciesBtn">Clear All Emergencies</button>
                                <button class="btn btn-secondary" id="unlockThemesBtn">Unlock All Themes</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DWELLERS TAB -->
                <div id="dwellers" class="tab-content">
                    <div class="field-legend">
                        <span class="legend-item">
                            <span style="color: #228B22; font-weight: bold;">‚úì</span> Original value
                        </span>
                        <span class="legend-item">
                            <span style="color: #FF8C00; font-weight: bold;">‚óè</span> Modified
                        </span>
                    </div>
                    <div class="dwellers-panel">
                        <div class="dwellers-list-container">
                            <h3>Dwellers</h3>
                            <input type="text" id="dwellerSearch" class="search-input" placeholder="Search dwellers...">
                            <div id="dwellersList" class="dwellers-list"></div>
                        </div>
                        <div id="dwellerDetails" class="dweller-details" style="display:none;">
                            <a href="#" class="back-link">‚Üê Back</a>
                            <div class="panel-section">
                                <h3 id="dwellerName">Dweller</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>
                                            First Name:
                                            <span class="info-icon" title="Dweller's first name">‚ìò</span>
                                        </label>
                                        <input type="text" id="dwellerFirstName" placeholder="First name">
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            Last Name:
                                            <span class="info-icon" title="Dweller's last name">‚ìò</span>
                                        </label>
                                        <input type="text" id="dwellerLastName" placeholder="Last name">
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            Gender:
                                            <span class="info-icon" title="Dweller's gender (1=Female, 2=Male)">‚ìò</span>
                                        </label>
                                        <select id="dwellerGender">
                                            <option value="1">Female</option>
                                            <option value="2">Male</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="panel-section">
                                <h3>Appearance</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>
                                            Skin Color:
                                            <span class="info-icon" title="Dweller's skin color (click to change)">‚ìò</span>
                                        </label>
                                        <input type="color" id="dwellerSkinColor">
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            Hair Color:
                                            <span class="info-icon" title="Dweller's hair color (click to change)">‚ìò</span>
                                        </label>
                                        <input type="color" id="dwellerHairColor">
                                    </div>
                                </div>
                            </div>

                            <div class="panel-section">
                                <h3>Stats & Health</h3>
                                <div class="stats-grid">
                                    <div class="stat-item"><label title="Strength - Affects melee damage and power generation">S:</label><input type="number" id="stat-s" min="1" max="10" placeholder="1"></div>
                                    <div class="stat-item"><label title="Perception - Affects hit chance and water production">P:</label><input type="number" id="stat-p" min="1" max="10" placeholder="1"></div>
                                    <div class="stat-item"><label title="Endurance - Affects health and exploration">E:</label><input type="number" id="stat-e" min="1" max="10" placeholder="1"></div>
                                    <div class="stat-item"><label title="Charisma - Affects reproduction and radio station">C:</label><input type="number" id="stat-c" min="1" max="10" placeholder="1"></div>
                                    <div class="stat-item"><label title="Intelligence - Affects medicine and science labs">I:</label><input type="number" id="stat-i" min="1" max="10" placeholder="1"></div>
                                    <div class="stat-item"><label title="Agility - Affects food production">A:</label><input type="number" id="stat-a" min="1" max="10" placeholder="1"></div>
                                    <div class="stat-item"><label title="Luck - Affects rush success and critical hits">L:</label><input type="number" id="stat-l" min="1" max="10" placeholder="1"></div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Level: <span class="info-icon" title="Dweller's current level (max 50)">‚ìò</span></label>
                                        <input type="number" id="dwellerLevel" min="1" placeholder="1">
                                    </div>
                                    <div class="form-group">
                                        <label>Experience: <span class="info-icon" title="XP earned toward next level">‚ìò</span></label>
                                        <input type="number" id="dwellerExp" min="0" placeholder="0">
                                    </div>
                                    <div class="form-group">
                                        <label>Health: <span class="info-icon" title="Current health points">‚ìò</span></label>
                                        <input type="number" id="dwellerHealth" min="0" placeholder="0">
                                    </div>
                                    <div class="form-group">
                                        <label>Max Health: <span class="info-icon" title="Maximum health based on Endurance">‚ìò</span></label>
                                        <input type="number" id="dwellerMaxHealth" min="0" placeholder="100">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Happiness (%): <span class="info-icon" title="Dweller morale (0-100)">‚ìò</span></label>
                                        <input type="number" id="dwellerHappiness" min="0" max="100" placeholder="100">
                                    </div>
                                    <div class="form-group">
                                        <label>Radiation: <span class="info-icon" title="Radiation damage (reduces max health)">‚ìò</span></label>
                                        <input type="number" id="dwellerRadiation" min="0" placeholder="0">
                                    </div>
                                </div>
                            </div>

                            <div class="panel-section">
                                <h3>Equipment</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Outfit: <span class="info-icon" title="Clothing that provides SPECIAL bonuses">‚ìò</span></label>
                                        <select id="dwellerOutfit"></select>
                                    </div>
                                    <div class="form-group">
                                        <label>Weapon: <span class="info-icon" title="Equipped weapon for combat">‚ìò</span></label>
                                        <select id="dwellerWeapon"></select>
                                    </div>
                                </div>
                            </div>

                            <div class="button-grid">
                                <button class="btn btn-secondary" id="maxStatsBtn">Max All Stats</button>
                                <button class="btn btn-secondary" id="saveDwellerBtn">Save Changes</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ROOMS TAB -->
                <div id="rooms" class="tab-content">
                    <div class="rooms-panel">
                        <div class="rooms-list-container">
                            <h3>Vault Rooms</h3>
                            <input type="text" id="roomSearch" class="search-input" placeholder="Search rooms...">
                            <div id="roomsList" class="rooms-list"></div>
                        </div>
                        
                        <div id="roomDetails" class="room-details" style="display:none;">
                            <a href="#" class="back-link">‚Üê Back</a>
                            <div class="panel-section">
                                <h3>Room Settings</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>
                                            Room Name:
                                            <span class="info-icon" title="The name or identifier of this room">‚ìò</span>
                                        </label>
                                        <input type="text" id="roomName" placeholder="Room name">
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            Type:
                                            <span class="info-icon" title="Room type (e.g., Diner, Barracks, Power Plant)">‚ìò</span>
                                        </label>
                                        <input type="text" id="roomType" placeholder="Room type">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>
                                            Level:
                                            <span class="info-icon" title="Room upgrade level (1-3)">‚ìò</span>
                                        </label>
                                        <input type="number" id="roomLevel" min="1" max="3">
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            State:
                                            <span class="info-icon" title="Current room state (e.g., Idle, Occupied)">‚ìò</span>
                                        </label>
                                        <input type="text" id="roomState" placeholder="e.g., Idle">
                                    </div>
                                </div>
                            </div>

                            <div class="panel-section">
                                <h3>Production</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>
                                            Power Generation:
                                            <span class="info-icon" title="Amount of power this room generates per cycle">‚ìò</span>
                                        </label>
                                        <input type="number" id="roomPower" min="0">
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            Food Production:
                                            <span class="info-icon" title="Amount of food this room produces per cycle">‚ìò</span>
                                        </label>
                                        <input type="number" id="roomFood" min="0">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>
                                            Water Production:
                                            <span class="info-icon" title="Amount of water this room produces per cycle">‚ìò</span>
                                        </label>
                                        <input type="number" id="roomWater" min="0">
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            Radiation:
                                            <span class="info-icon" title="Radiation level in this room (0-100)">‚ìò</span>
                                        </label>
                                        <input type="number" id="roomRadiation" min="0" max="100">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>
                                            Rush Timer:
                                            <span class="info-icon" title="Seconds until room can be rushed again">‚ìò</span>
                                        </label>
                                        <input type="number" id="roomRushTimer" min="0">
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            Merge Size:
                                            <span class="info-icon" title="How many rooms merged (1-3)">‚ìò</span>
                                        </label>
                                        <input type="number" id="roomMergeSize" min="1" max="3">
                                    </div>
                                </div>
                            </div>

                            <div class="form-row" style="gap: 10px; padding-top: 15px; border-top: 1px solid var(--border-color); margin-top: 15px;">
                                <button id="saveRoomBtn" class="btn btn-primary">Save Room</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- WASTELAND TAB -->
                <div id="wasteland" class="tab-content">
                    <div class="wasteland-panel">
                        <div class="panel-section">
                            <h3>Wasteland Teams</h3>
                            <input type="text" id="wastelandSearch" class="search-input" placeholder="Search teams...">
                            <div id="wastelandTeamsList" class="wasteland-teams-list"></div>
                        </div>
                        
                        <div id="wastelandTeamDetails" class="wasteland-details" style="display:none;">
                            <a href="#" class="back-link">‚Üê Back</a>
                            <div class="panel-section">
                                <h3 id="wastelandTeamName">Team</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>
                                            Team ID:
                                            <span class="info-icon" title="Unique identifier for this team">‚ìò</span>
                                        </label>
                                        <input type="text" id="teamId" placeholder="Team ID" readonly>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            Status:
                                            <span class="info-icon" title="Current team status">‚ìò</span>
                                        </label>
                                        <select id="teamStatus">
                                            <option value="exploring">Exploring</option>
                                            <option value="returning">Returning</option>
                                            <option value="idle">Idle</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="panel-section">
                                <h3>Quest Information</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>
                                            Quest ID:
                                            <span class="info-icon" title="Current quest identifier">‚ìò</span>
                                        </label>
                                        <input type="text" id="teamQuestId" placeholder="Quest ID">
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            Quest Progress:
                                            <span class="info-icon" title="Progress percentage (0-100)">‚ìò</span>
                                        </label>
                                        <input type="number" id="teamQuestProgress" min="0" max="100" placeholder="0">
                                    </div>
                                </div>
                            </div>

                            <div class="panel-section">
                                <h3>Resources</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>
                                            Caps Collected:
                                            <span class="info-icon" title="Caps collected during exploration">‚ìò</span>
                                        </label>
                                        <input type="number" id="teamCaps" min="0" placeholder="0">
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            Items Found:
                                            <span class="info-icon" title="Number of items collected">‚ìò</span>
                                        </label>
                                        <input type="number" id="teamItems" min="0" placeholder="0">
                                    </div>
                                </div>
                            </div>

                            <div class="button-grid">
                                <button class="btn btn-secondary" id="recallTeamBtn">Recall Team</button>
                                <button class="btn btn-secondary" id="maxTeamResourcesBtn">Max Resources</button>
                                <button class="btn btn-primary" id="saveTeamBtn">Save Changes</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- INVENTORY TAB -->
                <div id="inventory" class="tab-content">
                    <div class="inventory-panel">
                        <!-- Inventory Subtabs -->
                        <div class="inventory-subtabs">
                            <button class="inventory-subtab-btn active" data-subtab="weapons">üî´ Weapons</button>
                            <button class="inventory-subtab-btn" data-subtab="outfits">üëî Outfits</button>
                            <button class="inventory-subtab-btn" data-subtab="junk">üîß Junk</button>
                        </div>

                        <!-- Weapons Inventory -->
                        <div id="weapons-inventory" class="inventory-subtab-content active">
                            <div class="inventory-header">
                                <h3>Weapon Storage</h3>
                                <div class="inventory-actions">
                                    <input type="text" id="weaponSearch" class="search-input" placeholder="Search weapons...">
                                    <button class="btn btn-secondary" id="addWeaponBtn">‚ûï Add Weapon</button>
                                </div>
                            </div>
                            <div id="weaponsList" class="inventory-list"></div>
                        </div>

                        <!-- Outfits Inventory -->
                        <div id="outfits-inventory" class="inventory-subtab-content">
                            <div class="inventory-header">
                                <h3>Outfit Storage</h3>
                                <div class="inventory-actions">
                                    <input type="text" id="outfitSearch" class="search-input" placeholder="Search outfits...">
                                    <button class="btn btn-secondary" id="addOutfitBtn">‚ûï Add Outfit</button>
                                </div>
                            </div>
                            <div id="outfitsList" class="inventory-list"></div>
                        </div>

                        <!-- Junk Inventory -->
                        <div id="junk-inventory" class="inventory-subtab-content">
                            <div class="inventory-header">
                                <h3>Junk Storage</h3>
                                <div class="inventory-actions">
                                    <input type="text" id="junkSearch" class="search-input" placeholder="Search junk...">
                                    <button class="btn btn-secondary" id="addJunkBtn">‚ûï Add Junk</button>
                                </div>
                            </div>
                            <div id="junkList" class="inventory-list"></div>
                        </div>
                    </div>
                </div>

                <!-- SEASON PASS TAB -->
                <div id="seasonpass" class="tab-content">
                    <div class="seasonpass-panel">
                        <div class="panel-section">
                            <h3>Season Pass Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>
                                        Season ID:
                                        <span class="info-icon" title="Current season identifier">‚ìò</span>
                                    </label>
                                    <input type="text" id="seasonId" placeholder="Season ID">
                                </div>
                                <div class="form-group">
                                    <label>
                                        Season Level:
                                        <span class="info-icon" title="Current level/tier in the season pass">‚ìò</span>
                                    </label>
                                    <input type="number" id="seasonLevel" min="0" placeholder="0">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>
                                        Season XP:
                                        <span class="info-icon" title="Experience points in current season">‚ìò</span>
                                    </label>
                                    <input type="number" id="seasonXP" min="0" placeholder="0">
                                </div>
                                <div class="form-group">
                                    <label>
                                        Premium Pass:
                                        <span class="info-icon" title="Whether premium season pass is unlocked">‚ìò</span>
                                    </label>
                                    <select id="seasonPremium">
                                        <option value="false">No</option>
                                        <option value="true">Yes</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="panel-section">
                            <h3>Season Pass Rewards</h3>
                            <div id="seasonRewardsList" class="season-rewards-list">
                                <p style="text-align: center; color: #999; padding: 20px;">Load a season pass file (.dat) to view rewards</p>
                            </div>
                        </div>

                        <div class="panel-section">
                            <h3>Quick Actions</h3>
                            <div class="button-grid">
                                <button class="btn btn-secondary" id="maxSeasonLevelBtn">Max Season Level</button>
                                <button class="btn btn-secondary" id="unlockAllRewardsBtn">Unlock All Rewards</button>
                                <button class="btn btn-secondary" id="enablePremiumBtn">Enable Premium Pass</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- OTHERS TAB -->
                <div id="others" class="tab-content">
                    <div class="others-panel">
                        <div class="panel-section">
                            <h3>Other Characters</h3>
                            <div id="othersList" class="others-list"></div>
                        </div>

                        <div class="panel-section">
                            <h3>Recipes Manager</h3>
                            <button class="btn btn-secondary" id="showRecipesEditorBtn" style="margin-bottom: 15px;">üìã Edit Recipes</button>
                            <div id="recipesEditorPanel" style="display:none;">
                                <div style="margin-bottom: 15px;">
                                    <button class="btn btn-small" id="recipeSelectAllBtn">Select All</button>
                                    <button class="btn btn-small" id="recipeDeselectAllBtn">Deselect All</button>
                                    <input type="text" id="recipeSearchInput" class="search-input" placeholder="Search recipes...">
                                </div>
                                <div id="recipesList" class="recipes-checklist"></div>
                                <div style="margin-top: 15px; display: flex; gap: 10px;">
                                    <button class="btn btn-primary" id="saveRecipesBtn">Save Recipe Changes</button>
                                    <button class="btn btn-secondary" id="closeRecipesEditorBtn">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- RAW JSON TAB -->
                <div id="raw" class="tab-content">
                    <textarea id="jsonEditor" class="json-editor" placeholder="Raw JSON editor..."></textarea>
                </div>

                <div class="editor-info">
                    <span id="fileSize">Size: 0 B</span>
                    <span id="errorMessage" class="error"></span>
                </div>
            </section>

            <section class="search-section">
                <input type="text" id="searchInput" class="search-box" placeholder="üîç Search in JSON...">
                <div id="searchResults" class="search-results"></div>
            </section>
        </main>

        <!-- Vault Statistics Section -->
        <section class="vault-stats-section" id="vaultStatsSection">
            <h2>üìä Vault Statistics</h2>
            <div class="stats-no-data" id="statsNoData">
                <div class="no-data-message">
                    <span class="no-data-icon">üìä</span>
                    <p>No vault data loaded</p>
                    <small>Upload a save file to view statistics</small>
                </div>
            </div>
            <div class="stats-grid-container" id="statsGridContainer" style="display:none;">
                <div class="stat-card">
                    <h3>Population</h3>
                    <div class="stat-row"><span>Total Dwellers:</span> <strong id="statTotalDwellers">0</strong></div>
                    <div class="stat-row"><span>Average Level:</span> <strong id="statAvgLevel">0</strong></div>
                    <div class="stat-row"><span>Max Level Dwellers:</span> <strong id="statMaxLevelDwellers">0</strong></div>
                    <div class="stat-row"><span>Average Happiness:</span> <strong id="statAvgHappiness">0%</strong></div>
                </div>
                <div class="stat-card">
                    <h3>Resources</h3>
                    <div class="stat-row"><span>Total Caps:</span> <strong id="statTotalCaps">0</strong></div>
                    <div class="stat-row"><span>Food Storage:</span> <strong id="statFood">0</strong></div>
                    <div class="stat-row"><span>Water Storage:</span> <strong id="statWater">0</strong></div>
                    <div class="stat-row"><span>Power Storage:</span> <strong id="statPower">0</strong></div>
                    <div class="stat-row"><span>Total Rooms:</span> <strong id="statTotalRooms">0</strong></div>
                </div>
                <div class="stat-card">
                    <h3>Equipment</h3>
                    <div class="stat-row"><span>Total Weapons:</span> <strong id="statTotalWeapons">0</strong></div>
                    <div class="stat-row"><span>Total Outfits:</span> <strong id="statTotalOutfits">0</strong></div>
                    <div class="stat-row"><span>Total Junk:</span> <strong id="statTotalJunk">0</strong></div>
                    <div class="stat-row"><span>Equipped Dwellers:</span> <strong id="statEquippedDwellers">0</strong></div>
                </div>
                <div class="stat-card">
                    <h3>SPECIAL Stats</h3>
                    <div class="stat-row"><span>Avg Strength:</span> <strong id="statAvgS">0</strong></div>
                    <div class="stat-row"><span>Avg Perception:</span> <strong id="statAvgP">0</strong></div>
                    <div class="stat-row"><span>Avg Endurance:</span> <strong id="statAvgE">0</strong></div>
                    <div class="stat-row"><span>Avg Charisma:</span> <strong id="statAvgC">0</strong></div>
                    <div class="stat-row"><span>Avg Intelligence:</span> <strong id="statAvgI">0</strong></div>
                    <div class="stat-row"><span>Avg Agility:</span> <strong id="statAvgA">0</strong></div>
                    <div class="stat-row"><span>Avg Luck:</span> <strong id="statAvgL">0</strong></div>
                </div>
                <div class="stat-card">
                    <h3>Health & Combat</h3>
                    <div class="stat-row"><span>Avg Health:</span> <strong id="statAvgHealth">0</strong></div>
                    <div class="stat-row"><span>Total Radiation:</span> <strong id="statTotalRadiation">0</strong></div>
                    <div class="stat-row"><span>Irradiated Dwellers:</span> <strong id="statIrradiatedDwellers">0</strong></div>
                    <div class="stat-row"><span>Injured Dwellers:</span> <strong id="statInjuredDwellers">0</strong></div>
                </div>
                <div class="stat-card">
                    <h3>Vault Info</h3>
                    <div class="stat-row"><span>Vault Name:</span> <strong id="statVaultName">-</strong></div>
                    <div class="stat-row"><span>Vault Number:</span> <strong id="statVaultNumber">-</strong></div>
                    <div class="stat-row"><span>Unlocked Themes:</span> <strong id="statUnlockedThemes">0</strong></div>
                    <div class="stat-row"><span>Unlocked Recipes:</span> <strong id="statUnlockedRecipes">0</strong></div>
                </div>
            </div>
        </section>

        <!-- Add Inventory Modal -->
        <div id="addInventoryModal" class="inventory-modal">
            <div class="inventory-modal-content">
                <div class="inventory-modal-header">
                    <h3 id="modalTitle">Add Item</h3>
                    <button class="inventory-modal-close" onclick="closeInventoryModal()">√ó</button>
                </div>
                <div class="panel-section">
                    <div class="form-row">
                        <label for="modalItemSelect">Select Item:</label>
                        <select id="modalItemSelect" class="form-control">
                            <option value="">Choose...</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label for="modalQuantity">Quantity:</label>
                        <input type="number" id="modalQuantity" class="form-control" value="1" min="1">
                    </div>
                    <div class="form-row" id="modalDamageRow" style="display:none;">
                        <label for="modalDamage">Damage:</label>
                        <input type="number" id="modalDamage" class="form-control" value="10" min="1">
                    </div>
                </div>
                <div class="button-grid" style="margin-top: 20px;">
                    <button class="btn btn-primary" onclick="confirmAddInventoryItem()">Add Item</button>
                    <button class="btn btn-secondary" onclick="closeInventoryModal()">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Change History Modal -->
        <div id="historyModal" class="inventory-modal">
            <div class="inventory-modal-content" style="max-width: 800px;">
                <div class="inventory-modal-header">
                    <h3>üìú Change History</h3>
                    <button class="inventory-modal-close" onclick="closeHistoryModal()">√ó</button>
                </div>
                <div class="panel-section">
                    <div id="historyList" class="history-list" style="max-height: 500px; overflow-y: auto;"></div>
                </div>
                <div class="button-grid" style="margin-top: 20px;">
                    <button class="btn btn-secondary" onclick="closeHistoryModal()">Close</button>
                </div>
            </div>
        </div>

        <footer>
            <p>üèúÔ∏è Wasteland Editor v1.0 | Fallout Shelter Save File Editor üèúÔ∏è</p>
            <div class="footer-links">
                <a href="https://github.com/devvyyxyz/wasteland-editor" target="_blank" rel="noopener noreferrer">
                    üì¶ View on GitHub
                </a>
                <a href="https://github.com/devvyyxyz/wasteland-editor/issues" target="_blank" rel="noopener noreferrer">
                    üêõ Report Issues
                </a>
                <a href="https://github.com/devvyyxyz/wasteland-editor/blob/main/README.md" target="_blank" rel="noopener noreferrer">
                    üìñ Documentation
                </a>
                <a href="https://github.com/devvyyxyz/wasteland-editor/releases" target="_blank" rel="noopener noreferrer">
                    üöÄ Releases
                </a>
            </div>
        </footer>
    </div>

    <script src="js/sjcl.min.js"></script>
    <script src="js/decryptor.js"></script>
    <script src="js/data.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
